# ──────────────────────────────────────────────────────────────────────────────
# Animica Studio Services — Environment Example
# Copy to `.env` and adjust as needed.
# ──────────────────────────────────────────────────────────────────────────────

# Core node connection
RPC_URL=http://127.0.0.1:8545
# Expected chain id (requests with mismatched chainId are rejected)
CHAIN_ID=1337

# Server
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=info

# CORS allowlist (comma-separated origins for browser apps)
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
CORS_ALLOW_CREDENTIALS=false

# Rate limits (JSON). Single-quote the whole JSON blob so quotes stay intact.
# Buckets are tokens with steady refill; per-route entries override "default".
RATE_LIMITS='{
  "default":        {"capacity": 60, "refill_per_sec": 1.0},
  "/deploy":        {"capacity": 10, "refill_per_sec": 0.5},
  "/preflight":     {"capacity": 12, "refill_per_sec": 0.6},
  "/verify":        {"capacity": 6,  "refill_per_sec": 0.25},
  "/artifacts":     {"capacity": 20, "refill_per_sec": 1.0},
  "/faucet/drip":   {"capacity": 3,  "refill_per_sec": 0.05}
}'

# Faucet (dev/test only). Leave FAUCET_KEY empty in prod to disable the endpoint.
# FAUCET_KEY should be a hex-encoded private key for the drip account on your devnet.
FAUCET_KEY=
FAUCET_TOKENS_PER_DRIP=100000
FAUCET_ADDRESS_ALLOWLIST= # optional CSV of anim1… addresses

# Storage (artifacts & verification cache)
STORAGE_DIR=./.data

# SQLite by default; can be file path under STORAGE_DIR.
DATABASE_URL=sqlite:///./.data/studio_services.db

# Optional S3-compatible artifact backend (set S3_ENABLED=true to use)
S3_ENABLED=false
S3_ENDPOINT=
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=

# Background workers
VERIFY_WORKERS=2

# Features / instrumentation
METRICS_ENABLED=true
OPENAPI_ENABLED=true
