{
  "abiVersion": 1,
  "name": "Escrow",
  "functions": [
    {
      "name": "payer",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "addr"
        }
      ]
    },
    {
      "name": "payee",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "addr"
        }
      ]
    },
    {
      "name": "arbiter",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "addr"
        }
      ]
    },
    {
      "name": "amount",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "u256"
          },
          "name": "wei"
        }
      ]
    },
    {
      "name": "deposited",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "u256"
          },
          "name": "wei"
        }
      ]
    },
    {
      "name": "deadline",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "u64"
          },
          "name": "ts"
        }
      ]
    },
    {
      "name": "state",
      "stateMutability": "view",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "u8"
          },
          "name": "status",
          "docs": "0=AWAITING_DEPOSIT,1=DEPOSITED,2=RELEASED,3=REFUNDED,4=DISPUTED,5=RESOLVED"
        }
      ]
    },
    {
      "name": "deposit",
      "stateMutability": "nonpayable",
      "inputs": [
        {
          "type": {
            "abiType": "u256"
          },
          "name": "amount",
          "docs": "Must equal the configured escrow amount."
        }
      ],
      "outputs": [
        {
          "type": {
            "abiType": "bool"
          },
          "name": "ok"
        }
      ]
    },
    {
      "name": "release",
      "stateMutability": "nonpayable",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "bool"
          },
          "name": "ok"
        }
      ],
      "docs": "Release full deposited amount to payee (requires proper authority and state=DEPOSITED)."
    },
    {
      "name": "refund",
      "stateMutability": "nonpayable",
      "inputs": [],
      "outputs": [
        {
          "type": {
            "abiType": "bool"
          },
          "name": "ok"
        }
      ],
      "docs": "Refund full deposited amount to payer (e.g., if deadline passed and not released)."
    },
    {
      "name": "dispute",
      "stateMutability": "nonpayable",
      "inputs": [
        {
          "type": {
            "abiType": "bytes"
          },
          "name": "reason"
        }
      ],
      "outputs": [
        {
          "type": {
            "abiType": "bool"
          },
          "name": "ok"
        }
      ],
      "docs": "Open a dispute; moves state to DISPUTED."
    },
    {
      "name": "resolve",
      "stateMutability": "nonpayable",
      "inputs": [
        {
          "type": {
            "abiType": "u256"
          },
          "name": "payee_amount",
          "docs": "Amount to payee; remainder refunded to payer."
        }
      ],
      "outputs": [
        {
          "type": {
            "abiType": "bool"
          },
          "name": "ok"
        }
      ],
      "docs": "Arbiter resolves dispute by splitting deposited funds."
    },
    {
      "name": "setArbiter",
      "stateMutability": "nonpayable",
      "inputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "newArbiter"
        }
      ],
      "outputs": [
        {
          "type": {
            "abiType": "bool"
          },
          "name": "ok"
        }
      ]
    }
  ],
  "events": [
    {
      "name": "Deposited",
      "inputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "payer",
          "indexed": true
        },
        {
          "type": {
            "abiType": "u256"
          },
          "name": "amount",
          "indexed": false
        }
      ]
    },
    {
      "name": "Released",
      "inputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "payee",
          "indexed": true
        },
        {
          "type": {
            "abiType": "u256"
          },
          "name": "amount",
          "indexed": false
        }
      ]
    },
    {
      "name": "Refunded",
      "inputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "payer",
          "indexed": true
        },
        {
          "type": {
            "abiType": "u256"
          },
          "name": "amount",
          "indexed": false
        }
      ]
    },
    {
      "name": "Disputed",
      "inputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "by",
          "indexed": true
        },
        {
          "type": {
            "abiType": "bytes"
          },
          "name": "reason",
          "indexed": false
        }
      ]
    },
    {
      "name": "Resolved",
      "inputs": [
        {
          "type": {
            "abiType": "u256"
          },
          "name": "payee_amount",
          "indexed": false
        },
        {
          "type": {
            "abiType": "u256"
          },
          "name": "payer_amount",
          "indexed": false
        }
      ]
    },
    {
      "name": "ArbiterChanged",
      "inputs": [
        {
          "type": {
            "abiType": "address"
          },
          "name": "oldArbiter",
          "indexed": true
        },
        {
          "type": {
            "abiType": "address"
          },
          "name": "newArbiter",
          "indexed": true
        }
      ]
    }
  ],
  "errors": [
    {
      "name": "NotPayer",
      "inputs": []
    },
    {
      "name": "NotPayee",
      "inputs": []
    },
    {
      "name": "NotArbiter",
      "inputs": []
    },
    {
      "name": "AlreadyDeposited",
      "inputs": []
    },
    {
      "name": "NotDeposited",
      "inputs": []
    },
    {
      "name": "AlreadyFinalized",
      "inputs": []
    },
    {
      "name": "PastDeadline",
      "inputs": []
    },
    {
      "name": "InvalidState",
      "inputs": []
    },
    {
      "name": "ZeroAmount",
      "inputs": []
    }
  ],
  "docs": "Deterministic escrow: payer deposits fixed amount, arbiter can resolve disputes, funds released/refunded per rules."
}